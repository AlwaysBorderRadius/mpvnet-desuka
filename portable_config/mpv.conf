# =========================================================================
# Sources:
# Original Animejanai 3.2.0 mpv.config + Custom Edu mpv.config
#
# Animejanai Sources:
# https://github.com/hl2guide/better-mpv-config
#
# Animejanai External Sources:
# https://raw.githubusercontent.com/classicjazz/mpv-config/master/mpv.conf
#
# Custom Edu mpv.config Sources:
# https://github.com/zydezu/mpvconfig/blob/main/mpv.conf
#
# Otras Sources Interesantes:
# (HDR Playback) https://iamscum.wordpress.com/guides/videoplayback-guide/mpv-conf/     // Contiene mucha info importante
# https://kohana.fi/article/mpv-for-anime
# =========================================================================

##############################################
#           CONFIGURACIÓN GENERAL            #
##############################################

###########
#  Audio  #
###########
volume=100                      # Volumen inicial (0-100) // Initial volume (0-100)
volume-max=100                  # Límite máximo de volumen (0-1000), cualquier valor por encima de 100 resulta en amplificación (limitado a 100 para los puristas, mucha amplicacion acaba distorsionando) // Maximum volume (0-1000), everything above 100 results in amplification (limited to 100 for purists, too much amplification distorts)

audio-pitch-correction=yes      # Arregla el sonido agudo al acelerar la reproduccion // Automatically insert scaletempo when playing with higher speed

###############
#  Subtitles  #
###############
alang=jpn,eng,en,en-US,spa,es-ES,und                # Idiomas preferidos de audio // Preferred audio languages
slang=spa,es-ES,es-150,es-419,eng,en,en-US,und      # Idiomas preferidos de subtítulos // Preferred subtitle languages
blend-subtitles=no                                  # Selecciona cómo se mezclan los subtítulos con el vídeo // Sets how subtitles are blended with the video
# - no: Renderiza por separado, subtitulo mas nitido y sin alterar + subtitulos no salen en capturas
# - video: El subtitulo se renderiza junto al video, si usas shaders u otros efectos los subtitulos pasaran por los mismos filtros que la imagen + subtitulos salen en capturas
# - video-unscaled: Como 'video' pero sin escalar con el vídeo

# Compatibilidad
sub-ass-scale-with-window=no                          # Controla si los subtítulos ASS/SSA cambian de tamaño al redimensionar la ventana (Con "no" puede hacer que carteles con coordenadas fijas se desplacen o se vean mal colocados) // Controls if ASS/SSA subtitles change size when resizing the window (With "no" it can make banners with fixed coordinates move or be misaligned)'
sub-ass-vsfilter-blur-compat=yes                      # Retrocompatibilidad para los fansubs de vsfilter // Backward compatibility for vsfilter fansubs
demuxer-mkv-subtitle-preroll=yes                      # Intenta mostrar correctamente los subs embebidos al avanzar/retroceder // Try to correctly show embedded subs when seeking
embeddedfonts=yes                                     # Usa las fuentes embebidas para los subs SSA/ASS // Use embedded fonts for SSA/ASS subs

#####################
#  Window / Player  #
#####################
border=yes                        # Bordes redondos de w11 para la ventana (valores: yes/no) // w11 Window border (values: yes/no)
title-bar=no                      # Elimina la barra de titulo de la ventana // Remove the window title-bar
autofit=60                        # Escala la ventana al un % del tamaño de la pantalla (%) // Resize window to a % of the screen size (%)
geometry=50:50                    # Posiciona la ventana en la pantalla (formato: X%:Y%) // Positions the window on the screen (format: X%:Y%)
cursor-autohide=1500              # Oculta automaticamente el cursor si no hay movimiento (ms) (valores: no/always/tiempo_en_ms) // Autohides cursor (values: no/always/time_in_ms)
#fullscreen=yes                   # Inicia en pantalla completa // Start fullscreen
#keep-open=yes                    # No cierra el reproductor al terminar el video // Don't close the player after finishing the video
hr-seek=yes                       # Selecciona la precisión de los saltos al avanzar/retroceder // Sets the precision of seeking in the timeline
# - no: Búsqueda normal (menos precisa pero más rápida)
# - yes: Búsqueda de alta resolución (más precisa en saltos largos)
# - absolute: Siempre búsqueda exacta (más lento pero preciso)
# - fuzzy: Búsqueda aproximada cuando falla la exacta (balance velocidad/precisión)
#hr-seek-framedrop=no             # No se salta frames en saltos al avanzar/retroceder (no necesario si al input.conf se pone "seek exact") // No framedrop on seeking (not needed if "seek exact" is set in input.conf)

# Guardado de posición (Watch later) y ajustes
resume-playback=no                              # Evita que mpv recuerde ajustes previos de cada archivo // Prevents mpv from remembering previous settings for each file
#watch-later-options=start                      # Guarda el tiempo exacto de inicio // Save exact starting time
#reset-on-next-file=pause                       # Restaura estado pausado en el siguiente archivo // Reset "paused" state on next file

--autocreate-playlist=no					# Bloquea la funcion nativa de crear listas de reproduccion. Mejor usar Autoload.lua // Blocks the native playlist creation function. Better use Autoload.lua

#############
#  OSC/OSD  #
#############

# OSC (On-Screen Controller) // Controlador en pantalla
osc=no                            # 'no' requerido para el OSC de ModernX // 'no' required for ModernX OSC

# OSD (On-Screen Display) // Interfaz
osd-font='Segoe UI'                 # Fuente usada en la interfaz (cualquier fuente instalada en el sistema) // Font used for the OSD (any system-installed font)
osd-font-size=20                    # Tamaño de la fuente del OSD // OSD font size
osd-scale=1                       # Escala general del OSD (reducir/aumentar tamaño) // Overall OSD scaling factor
osd-border-size=1                   # Tamaño del borde de los mensajes en pantalla y de la barra de progreso // Border size of OSD messages and progress bar
osd-bar=yes                         # Barra de progreso y volumen // Bar for progress and volume
osd-bar-h=2                         # Altura de la barra de progreso y volumen // Height of the progress and volume bar
osd-bar-w=60                        # Ancho de la barra de progreso y volumen // Width of " " "
osd-duration=2000                   # Duración de los mensajes en pantalla (ms) // How long osd messages show (ms)
osd-playing-msg=                    # No muestra el mensaje de que se esta reproduciendo al empezar a reproducir // Does not show the message of what is playing when starting to play

#################
#  Screenshots  #
#################
screenshot-format=png                   # Capturas en formato PNG // Screenshots in PNG format
screenshot-directory=~~/screenshots/    # Carpeta donde se guardan capturas (~~/screenshots/ = carpeta de capturas en la carpeta del mpv) // Directory for screenshots (~~/screenshots/ = screenshots folder in the mpv folder)
screenshot-template='%F__%P__%04n'      # Nombre de archivo: archivo__posición__número // File name: file__position__number

#####################
#  Input / Control  #
#####################
input-ar-delay=500                 # Retraso (ms) al repetir comandos al mantener pulsada una tecla // Delay (ms) repeating commands when holding key down

####################
#  Images / Loops  #
####################
image-display-duration='inf'       # Muestra imágenes indefinidamente // Display images indefinitely



##############################################
#           CONFIGURACIÓN TÉCNICA            #
##############################################

#############
#  GPU API  #
#############
vo=gpu-next             # Usa salida de vídeo acelerada por GPU (gpu-next es el backend moderno) // Use GPU-accelerated video output (gpu-next is the modern backend)

# Los 4 siguientes parametros pueden causar problemas de rendimiento con algunos controladores y GPUs. Eliminalas si encuentras algun problema de reproduccion / The next 4 parameters can cause performance problems with some GPU drivers and GPUs, remove them if you encounter playback issues
profile=high-quality    # Perfil con ajustes visuales de alta calidad // Profile with high-quality visual settings
gpu-context=auto        # Selecciona automáticamente el contexto de GPU (OpenGL, Vulkan, etc.) (en realidad redundante si hay gpu-api=vulkan) // Automatically select GPU context (OpenGL, Vulkan, etc.) (redundant if gpu-api=vulkan)
gpu-api=vulkan          # Selecciona la API gráfica // Sets the graphics API
# - vulkan (best): Windows, Linux
# - opengl: Windows, Linux
# - d3d11 / d3d12: Windows
vulkan-queue-count=3    # Número de colas Vulkan usadas para procesamiento paralelo // Number of Vulkan queues used for parallel processing

#######################
#  Hardware Decoding  #
#######################
hwdec=nvdec             # Selecciona la decodificación por hardware (el mejor hardware decoder) // Sets the hardware decoding method (the best hardware decoder)
# - no: software decoding
# - auto:
# - nvdec: Windows/Linux, NVIDIA
# - vaapi: Linux, Intel/AMD
# - d3d11va: Windows, NVIDIA/AMD/Intel
# - d3d12va: Windows, NVIDIA/AMD/Intel
# - videotoolbox: macOS

####################
#  Cache & Buffer  #
####################
# Utiliza una gran caché de RAM para el avanzar/retroceder // Uses a large seekable RAM cache
cache=yes                 # Activa caché de RAM incluso en archivos locales // Enable RAM cache even for local files
cache-pause=yes           # Pausa la reproducción si el caché se llena // Pause playback if cache fills
cache-pause-initial=yes   # Pausa al inicio hasta que el caché se llene lo suficiente // Pause at start until cache fills
cache-secs=30             # Segundos de caché almacenados en RAM // Number of seconds cached in RAM

# Usa una extra grande caché de RAM (necesita cache=yes para ser útil) (tamaños muy altos, si encuentras problemas de rendimiento, reduce los valores a 2-6G)// Uses extra large RAM cache (needs cache=yes to make it useful) (very large sizes, if you encounter performance issues, reduce the values to 2-6G)
demuxer-max-bytes=18009999M         # Tamaño máximo de caché en bytes // Maximum demuxer cache size in bytes
demuxer-max-back-bytes=12009999M    # Máx. de caché para retroceso // Maximum cache for backward seeking
demuxer-cache-wait=yes              # Espera a que el caché esté lleno antes de reproducir // Wait for cache to fill before playing

profile-restore=copy-equal        # Configura el método de restauración del perfil a "copy if equal" // Sets the profile restore method to "copy if equal"

###################
#  Video Filters  #
###################
dither-depth=auto                     # Profundidad de dithering automática // Automatic dithering depth
deband=yes                            # Activa filtro anti-banding (mejora gradientes) // Enable debanding filter (improves gradients)
deband-iterations=4                   # Iteraciones del filtro deband // Debanding filter iterations
deband-threshold=48                   # Umbral para detección de bandas // Threshold for banding detection
deband-range=16                       # Rango de píxeles para debanding // Pixel range for debanding
deband-grain=48                       # Añade grano artificial para ocultar bandas // Add artificial grain to hide banding

# Shaders (siempre activos)
glsl-shader="~~/shaders/noise_static_luma.hook"     # Sombreado GLSL de ruido en luminancia // GLSL shader: static noise on luma'
glsl-shader="~~/shaders/noise_static_chroma.hook"   # Sombreado GLSL de ruido en crominancia // GLSL shader: static noise on chroma'

####################
#  Images / Loops  #
####################
[extension.gif]
loop-file=inf                      # Reproduce GIF en bucle infinito // Loop GIFs infinitely

[extension.webm]
loop-file=inf                      # Reproduce WebM en bucle infinito // Loop WebM infinitely

##############
#  Profiles  #
##############
[upscale-off]
vf=

[upscale-on-quality]
vf=vapoursynth="~~/../animejanai/profiles/animejanai_quality.vpy":buffered-frames=1:concurrent-frames=8

[upscale-on-balanced]
vf=vapoursynth="~~/../animejanai/profiles/animejanai_balanced.vpy":buffered-frames=1:concurrent-frames=8

[upscale-on-performance]
vf=vapoursynth="~~/../animejanai/profiles/animejanai_performance.vpy":buffered-frames=1:concurrent-frames=8

[upscale-on-1]
vf=vapoursynth="~~/../animejanai/profiles/animejanai_1.vpy":buffered-frames=1:concurrent-frames=8

[upscale-on-2]
vf=vapoursynth="~~/../animejanai/profiles/animejanai_2.vpy":buffered-frames=1:concurrent-frames=8

[upscale-on-3]
vf=vapoursynth="~~/../animejanai/profiles/animejanai_3.vpy":buffered-frames=1:concurrent-frames=8

[upscale-on-4]
vf=vapoursynth="~~/../animejanai/profiles/animejanai_4.vpy":buffered-frames=1:concurrent-frames=8

[upscale-on-5]
vf=vapoursynth="~~/../animejanai/profiles/animejanai_5.vpy":buffered-frames=1:concurrent-frames=8

[upscale-on-6]
vf=vapoursynth="~~/../animejanai/profiles/animejanai_6.vpy":buffered-frames=1:concurrent-frames=8

[upscale-on-7]
vf=vapoursynth="~~/../animejanai/profiles/animejanai_7.vpy":buffered-frames=1:concurrent-frames=8

[upscale-on-8]
vf=vapoursynth="~~/../animejanai/profiles/animejanai_8.vpy":buffered-frames=1:concurrent-frames=8

[upscale-on-9]
vf=vapoursynth="~~/../animejanai/profiles/animejanai_9.vpy":buffered-frames=1:concurrent-frames=8

[default]
profile=upscale-off